<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Geocomputation with R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Robin Lovelace" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/default-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/leaflet/leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet/leaflet.js"></script>
    <link href="libs/leafletfix/leafletfix.css" rel="stylesheet" />
    <script src="libs/Proj4Leaflet/proj4-compressed.js"></script>
    <script src="libs/Proj4Leaflet/proj4leaflet.js"></script>
    <link href="libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
    <script src="libs/leaflet-binding/leaflet.js"></script>
    <script src="libs/leaflet-providers/leaflet-providers.js"></script>
    <script src="libs/leaflet-providers-plugin/leaflet-providers-plugin.js"></script>
    <link href="libs/leaflet-minimap/Control.MiniMap.min.css" rel="stylesheet" />
    <script src="libs/leaflet-minimap/Control.MiniMap.min.js"></script>
    <script src="libs/leaflet-minimap/Minimap-binding.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Geocomputation with R
## <br/>Two day course
### Robin Lovelace
### University of Leeds, 2019-04-26

---






# About the course

---

## About us

**Robin Lovelace**

- Experience: 10 years using R, ~5 years programming + developing R packages
- Teaching: many workshops, co-author of *Efficient R Programming* and *Geocomputation with R* 
- Application: energy and transport, e.g. [cycling potential](http://eprints.whiterose.ac.uk/141852/)

--

**Nik√©e Groot**

- Biologist
- Researching sustainable futures

--

**You?**

--

**Course home: https://git.io/geocompr-2-day-course **

---

## Housekeeping

- The venue + facilities
- The agenda + further info can be found at:
- https://git.io/geocompr-2-day-course





```
## Linking to GEOS 3.7.0, GDAL 2.4.0, PROJ 5.2.0
```

<div id="htmlwidget-7c7fbe90307e94667e1d" style="width:504px;height:504px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-7c7fbe90307e94667e1d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,"CartoDB.Positron",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"pane":"tilePane"}]},{"method":"createMapPane","args":["overlayPane01",401]},{"method":"addPolygons","args":[[[[{"lng":[-1.5564243,-1.5564282,-1.555347,-1.5552178,-1.5552181,-1.5552228,-1.5550006,-1.5549959,-1.5549955,-1.554857,-1.5548532,-1.5549827,-1.5564243],"lat":[53.8030374,53.8035416,53.8035445,53.8035449,53.8035925,53.8037463,53.8037486,53.8035944,53.8035387,53.803539,53.8030417,53.8030413,53.8030374]}]]],"X445317959","lida$osm_polygons",{"interactive":true,"className":"","pane":"overlayPane01","stroke":true,"color":"#666666","weight":1,"opacity":1,"fill":true,"fillColor":"#FF0000","fillOpacity":1,"smoothFactor":1,"noClip":false},"<div style=\"max-height:10em;overflow:auto;\"><table>\n\t\t\t   <thead><tr><th colspan=\"2\"><b>445317959<\/b><\/th><\/thead><\/tr><tr><td style=\"color: #888888;\">osm_id<\/td><td>445317959<\/td><\/tr><tr><td style=\"color: #888888;\">name<\/td><td>Worsley Building<\/td><\/tr><tr><td style=\"color: #888888;\">building<\/td><td>university<\/td><\/tr><tr><td style=\"color: #888888;\">description<\/td><td>Health Sciences Library<\/td><\/tr><tr><td style=\"color: #888888;\">wikidata<\/td><td>Q26218172<\/td><\/tr><\/table><\/div>",{"maxWidth":500,"minWidth":100,"autoPan":true,"keepInView":false,"closeButton":true,"className":""},"445317959",{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[[],"lida$osm_polygons",{"collapsed":true,"autoZIndex":true,"position":"topleft"}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":false,"updateWhenIdle":true,"position":"bottomright"}]},{"method":"addMiniMap","args":[null,"OpenTopoMap","bottomleft",150,150,19,19,-10,false,false,false,true,false,false,{"color":"#ff7800","weight":1,"clickable":false},{"color":"#000000","weight":1,"clickable":false,"opacity":0,"fillOpacity":0},{"hideText":"Hide MiniMap","showText":"Show MiniMap"},[]]}],"limits":{"lat":[53.8030374,53.8037486],"lng":[-1.5564282,-1.5548532]},"setView":[[53.7983104104734,-1.5506128880008],15,[]]},"evals":[],"jsHooks":[]}</script>

---

## Learning objectives

By the end of the course, you will be able to:

- Be able to use R and RStudio as a powerful Geographic Information System (GIS)
- Know how R's spatial capabilities fit within the landscape of open source GIS software
- Be confident with using R's command-line interface (CLI) and scripting capabilities for geographic data processing
- Understand how to import a range of data sources into R
- Be able to perform a range of attribute operations such as subsetting and joining
- Understand how to implement a range of spatial data operations including spatial subsetting and spatial aggregation
- Have the confidence to output the results of geographic research in the form of static and interactive maps

---

## Agenda

.pull-left[

### Day 1: Foundations

09:30-11:00 Introduction to the course and software

11:15-12:30: R's spatial ecosystem

**Lunch**

13:30-15:00 The structure of vector geographic data in R and working with attribute data

15:15-16:30 Spatial data operations

]

--

.pull-right[


### Day 2 GIS, viz, modelling

09:30-11:00 Reading and writing geographic data

11:15-12:30: Geometric operations

**Lunch**

13:30-15:00 Visualisation

15:15-16:30 Working on your own data

]

--

**Updated challenges/examples: git.io/geocompr-2-day-course**

---

## What is geocomputation?

.pull-left[

&gt; GeoComputation is about using the various different types of geodata and about developing relevant geo-tools within the overall context of a 'scientific' approach (Openshaw and Abrahart, 2000).

]

.pull-right[
![](http://www.ccg.leeds.ac.uk/people/s.openshaw/s.openshaw.png)&lt;!-- --&gt;
]

--

- But we do differ from early definitions in one important way:

&gt; At the turn of the 21st Century it was unrealistic to expect readers to be able to reproduce code examples, due to barriers preventing access to the necessary hardware, software and data

---

## Other aspects of the definition

--

&gt; What distinguishes geocomputation from the older quantitative geography, is its emphasis on "creative and experimental" GIS applications (Longley, Brooks, McDonnell, and MacMillan, 1998).

--

It's about doing "practical work that is beneficial or useful" (Openshaw and Abrahart, 2000).

--

&gt; about harnessing the power of modern computers to *do things* with geographic data.

---

# Introduction to the course and software

&lt;p&gt;&lt;a href="https://www.rstudio.com/products/RStudio/?wvideo=520zbd3tij"&gt;&lt;img src="https://embedwistia-a.akamaihd.net/deliveries/260e6e980f526abaedf8ef3378270c899da74f08.jpg?image_play_button_size=2x&amp;amp;image_crop_resized=960x540&amp;amp;image_play_button=1&amp;amp;image_play_button_color=71a5d4e0" style="width: 400px; height: 225px;" width="400" height="225"&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://www.rstudio.com/products/RStudio/?wvideo=520zbd3tij"&gt;RStudio IDE Overview&lt;/a&gt;&lt;/p&gt;

- Source: [rstudio.com](https://www.rstudio.com/products/RStudio/?wvideo=520zbd3tij)

--

- Key elements: Source, Console, Environment, Plot panes

--

- Projects and short-cuts (e.g. try `Alt-Shift-J`)

---

## An introduction to R

See slides at https://geocompr.github.io/presentations/intro-to-R.html

- Work through Exercises in Section 1 of handouts

&lt;!-- - R installation questions/debugging --&gt;
&lt;!-- - How to use RStudio (practical in groups of 2) --&gt;
&lt;!-- - R classes and working with data frames in the **tidyverse** --&gt;

&lt;!-- Idea: get people to say where they are from, how many cups of coffee they drink per week their favourite animal --&gt;

---

# R's spatial ecosystem

- See slides at https://geocompr.github.io/presentations/satRday-newcastle.html#19


- Rs capabilities have evolved substantially:

--

- **rgdal**, released in 2003

--

- **sp**, released 2005
  - **sp**verse: **gstat**, **geosphere**, **adehabitat**

- **raster**, released 2010

---

## Spatial ecosystem: demo and practical

- Live demo: using R as a GIS
- Spatial data in R
- R's spatial ecosystem (see section [1.4 of Geocomputation with R - package ecosystem](https://geocompr.robinlovelace.net/intro.html#rs-spatial-ecosystem))
- Work through Section 2 exercises in hand-out
- Follow-on practical: [Work through the exercise 1:3 in Chapter 2](https://geocompr.robinlovelace.net/spatial-class.html#ex2)
    - Advanced: complete exercises in Chapter 2
    - Bonus: reproduce the results in the `sf` vignette `sf1`

&lt;!-- And example from the PCT --&gt;

---

# Attribute operations

- See slides at https://geocompr.github.io/presentations/attr.html#1

- Work through the following sections in Geocomputation with R:

- Vector attribute subsetting ([3.2.1](https://geocompr.robinlovelace.net/attr.html#vector-attribute-subsetting))
- Vector attribute aggregation ([3.2.2](https://geocompr.robinlovelace.net/attr.html#vector-attribute-aggregation))
- Vector attribute joining ([3.2.3](https://geocompr.robinlovelace.net/attr.html#vector-attribute-joining))
- Creating attributes and removing spatial information ([3.2.4](https://geocompr.robinlovelace.net/attr.html#vec-attr-creation))

- Answer questions in Section 3 in the handouts

- Bonus: try remaining exercises in Chapter [3](https://geocompr.robinlovelace.net/attr.html#exercises-1)

&lt;!--     - Core: Questions 1:3 and question 9 --&gt;
&lt;!--     - Bonus: complete as many exercises as possible in Chapter 3 --&gt;

---
  
# Spatial data operations

- Live demo using stats19 data in Leeds

Work through the following sections in Geocomputation with R

- Spatial subsetting ([4.2.1](https://geocompr.robinlovelace.net/spatial-operations.html#spatial-subsetting))
- Topological relations ([4.2.2](https://geocompr.robinlovelace.net/spatial-operations.html#topological-relations))
- Spatial joining ([4.2.3](https://geocompr.robinlovelace.net/spatial-operations.html#spatial-joining))

- Work through section 4 in handouts

- Bonus: Non-overlapping joins ([4.2.4](https://geocompr.robinlovelace.net/spatial-operations.html#non-overlapping-joins))
- Spatial data aggregation ([4.2.5](https://geocompr.robinlovelace.net/spatial-operations.html#spatial-aggr))

&lt;!-- - Exercises: Chapter 4 --&gt;

---

# Day 2 GIS, visualisation, modelling: recap

--

.pull-left[

### Day 1: Foundations

09:30-11:00 Introduction to the course and software

11:15-12:30: R's spatial ecosystem

**Lunch**

13:30-15:00 The structure of vector geographic data in R and working with attribute data

15:15-16:30 Spatial data operations

]

--

.pull-right[


09:30-11:00 Reading and writing geographic data

11:15-12:30: Geometric operations

**Lunch**

13:30-15:00 Visualisation

15:15-16:30 Working on your own data

]

--

**Updated challenges/examples: git.io/geocompr-2-day-course**

---

# Reading and writing geographic data

- See slides at: https://geocompr.github.io/presentations/read-write.html#1

---

# Geometric operations

- See Chapter 5 of Geocomputation with R: [Geometry operations](https://geocompr.robinlovelace.net/geometric-operations.html)

- Example:


```r
library(osmdata)
cycleways = opq("leeds") %&gt;% 
  add_osm_feature(key = "name", value = "Cycle Superhighway 1") %&gt;% 
  osmdata_sf()
cycleway_line = cycleways$osm_lines
cycleway_buffer = cycleway_line %&gt;% 
  st_transform(27700) %&gt;% 
  st_buffer(500) %&gt;% 
  st_transform(4326)
```

---

## Geometric exercises

- Attempt the questions in Section 6 in the hand-out

- Work through some of the examples of Chapter 6 of Geocomputation with R

- Identify serious road traffic collisions that happened within 500 m of the Cycle Superhighway in 2017 (see [https://git.io/geocompr-2-day-course](https://github.com/geocompr/geocompkg/blob/master/courses/2-day-course.md#section-4))

---

# Visualisation

- See slides at https://geocompr.github.io/presentations/04_viz.html#1

---

# Working on your own data
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
