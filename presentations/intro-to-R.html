<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>An introduction to R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Robin Lovelace, Jannes Menchow and Jakub Nowosad" />
    <link href="intro-to-R_files/remark-css/default.css" rel="stylesheet" />
    <link href="intro-to-R_files/remark-css/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# An introduction to R
## üåê<br/> Geocomputation with R
### Robin Lovelace, Jannes Menchow and Jakub Nowosad

---






layout: true
background-image: url(xaringan_stuff/img/r_geocomp_background.png)
background-size: cover

---

## What is R?

"R is an integrated suite of software facilities for data manipulation, calculation and graphical display. Among other things it has

- an effective data handling and storage facility
- a suite of operators for calculations on arrays, in particular matrices,
- a large, coherent, integrated collection of intermediate tools for data analysis,
- graphical facilities for data analysis and display either directly at the computer or on hardcopy, and
- a well developed, simple and effective programming language [with] conditionals, loops, user defined recursive functions and input and output"

R Core Team (2019)


```r
help.start() # get started with R, from in R!
```

---

## Y R?

Start with broader questions:

- Why use a programming language at all?

- Because it allows you to do more things than monolithic programs driven by a graphical user interface (GUI) such as Microsoft Excel and ESRI's ArcMap.

- Why use a command-line interface (CLI)?

- It lets you get things done faster (once you learn the workflow)
- Scalability, e.g. the Propensity to Cycle Tool ([PCT](http://www.pct.bike/)) (Lovelace et al. 2019)
- Reproducibility

---

.pull-left[

![](https://imgs.xkcd.com/comics/the_difference.png)

]

--

.pull-right[


## What is Reproducibility?

&gt; A process in which the same results can be generated by others using publicly accessible code

Consequences for research, science and participation.

"There is a tremendous amount
of flexibility and power waiting for you with the command line. Many times
you can do something on the command line in a fraction of the time you
can do it with a GUI" (Sherman, 2008).

In R reproducibility can be as simple as sharing an R script!

Programming is necessary for data science and reproducibility, but which language?

]

---

background-image: url(https://stackoverflow.blog/wp-content/uploads/2017/10/tag_growth_scatter-1-771x675.png)
background-size: 85%

--

## Which language?

--


.pull-left[

- Large user community

- In your area of work

- Spatial, temporal and modelling capabilities

- Visualisation and statistical analysis

]

.pull-right[




]

---

# RStudio - get it from [rstudio.com](https://www.rstudio.com/products/rstudio/download/)

- Multiplatform R editor for Linux, Mac + [web](https://mybinder.org/v2/gh/geocompr/RGSWorkshop/master?urlpath=rstudio)

![](https://raw.githubusercontent.com/ITSLeeds/TDS/master/courses/2day/images/rstudio-ui.png)

---

# Live demo

---

## An introduction to R's syntax

Everything that 'exists' is an object

---

## Assignment and style


```r
x = 1   # equals assignment
x &lt;- 1  # arrow assignment
```

Which to use?

--

It's a matter of style. See [#319](https://github.com/Robinlovelace/geocompr/issues/319)

--

They do differ in very specific circumstances, e.g.



```r
system.time(y &lt;- sqrt(1:1e6))
system.time({y = sqrt(1:1e6)})
```

- Assignment inside function call

--

- Good, consistent style helps communicate your work:


```r
sQuare_RootdeC=quantile(y,seq(0,1,0.1))   # bad
sqrt_deciles = quantile(y, probs = seq(0, 1, by = 0.1)) # good
```

---

# Vectors

- Creating vectors with `c()`


```r
person_name = c("arron", "bob", "carl")
n_coffee = c(5, 1, 0)
likes_tea = c(TRUE, FALSE, TRUE)
hometown = c("west-yorkshire", "avon", "london")
```

- R is vectorised


```r
is.vector(person_name)
```

```
## [1] TRUE
```

```r
is.vector(1)
```

```
## [1] TRUE
```

---

## Vector classes

What is their class?


```r
class(person_name)
```

```
## [1] "character"
```

```r
class(n_coffee)
```

```
## [1] "numeric"
```

--

What class is `likes_tea`?

---

## Class coercion


```r
n_coffee # print the object
```

```
## [1] 5 1 0
```



```r
n_coffee_char = as.character(n_coffee)
```


```r
n_coffee_char
```

```
## [1] "5" "1" "0"
```



```r
person_name_numeric = as.numeric(person_name)
```

```
## Warning: NAs introduced by coercion
```

```r
person_name_numeric
```

```
## [1] NA NA NA
```

---

## Vector subsetting


```r
person_name[2]
```

```
## [1] "bob"
```

```r
person_name[c(FALSE, TRUE, FALSE)]
```

```
## [1] "bob"
```

--

Recycling


```r
person_name[c(TRUE, FALSE)]
```

```
## [1] "arron" "carl"
```

--

What just happened?

---

## Data frames

The most common and useful object type for many applications


```r
coffee_df = data.frame(
  person_name,
  n_coffee,
  likes_tea,
  hometown
  )
coffee_df
```

```
##   person_name n_coffee likes_tea       hometown
## 1       arron        5      TRUE west-yorkshire
## 2         bob        1     FALSE           avon
## 3        carl        0      TRUE         london
```

```r
class(coffee_df)
```

```
## [1] "data.frame"
```


---

## tibbles


```r
coffee = tibble::tibble(
  person_name,
  n_coffee,
  likes_tea,
  hometown
  )
coffee
```

```
## # A tibble: 3 x 4
##   person_name n_coffee likes_tea hometown      
##   &lt;chr&gt;          &lt;dbl&gt; &lt;lgl&gt;     &lt;chr&gt;         
## 1 arron              5 TRUE      west-yorkshire
## 2 bob                1 FALSE     avon          
## 3 carl               0 TRUE      london
```

```r
class(coffee)
```

```
## [1] "tbl_df"     "tbl"        "data.frame"
```

---

## Data frame operations - rows


```r
coffee[2, ]
```

```
## # A tibble: 1 x 4
##   person_name n_coffee likes_tea hometown
##   &lt;chr&gt;          &lt;dbl&gt; &lt;lgl&gt;     &lt;chr&gt;   
## 1 bob                1 FALSE     avon
```

```r
dplyr::slice(coffee, 2)
```

```
## # A tibble: 1 x 4
##   person_name n_coffee likes_tea hometown
##   &lt;chr&gt;          &lt;dbl&gt; &lt;lgl&gt;     &lt;chr&gt;   
## 1 bob                1 FALSE     avon
```

```r
coffee[coffee$likes_tea, ]
```

```
## # A tibble: 2 x 4
##   person_name n_coffee likes_tea hometown      
##   &lt;chr&gt;          &lt;dbl&gt; &lt;lgl&gt;     &lt;chr&gt;         
## 1 arron              5 TRUE      west-yorkshire
## 2 carl               0 TRUE      london
```

---

## Data fram operations - columns


```r
coffee[, 2]
```

```
## # A tibble: 3 x 1
##   n_coffee
##      &lt;dbl&gt;
## 1        5
## 2        1
## 3        0
```

```r
dplyr::select(coffee, n_coffee)
```

```
## # A tibble: 3 x 1
##   n_coffee
##      &lt;dbl&gt;
## 1        5
## 2        1
## 3        0
```

```r
coffee$n_coffee
```

```
## [1] 5 1 0
```



---

## Functions

Everything that happens is a function

Functions take arguments



```r
quantile(n_coffee)
```

```
##   0%  25%  50%  75% 100% 
##  0.0  0.5  1.0  3.0  5.0
```

```r
quantile(n_coffee, probs = c(0.1, 0.5, 0.9))
```

```
## 10% 50% 90% 
## 0.2 1.0 4.2
```

```r
# ?quantile # get help!
quantile(n_coffee, names = FALSE)
```

```
## [1] 0.0 0.5 1.0 3.0 5.0
```


---

## Base R plots


```r
plot(coffee$n_coffee)
```

![](intro-to-R_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;

---

## Next steps and getting help

- R is a language - needs practice

- Frequent use of R's help is recommended, e.g. with `?plot()`

- Check-out online communities such as StackOverflow and the RStudio community

--

Books

- Advanced R programming (Wickham, 2014a)

- R for Data Science (Grolemund and Wickham, 2016)

- Geocomputation with R (Lovelace, Nowosad, and Meunchow, 2019)

&lt;!-- [@lovelace_geocomputation_2019]  --&gt;

---

# Exercises

- Get into groups of 2 to 5

- In your group decide: what would you like to use R for?

- What are other tools that you could use instead of/alongside R?

- What datasets would you like to be able to be able to read-on / analyse in R?

- What do you most want to get out of today's course?

--

- Practical bit: write and R script that creates a data frame with the name, numbers of cups of coffee, and hometown of each person in your group.

- Bonus (we'll come round to help): add the code you wrote to the script called `coffee.R` in the [github.com/geocompr/RGSWorkshop](https://github.com/geocompr/RGSWorkshop) repo


---

# References + contact

- To contact us about the book - go to [github.com/Robinlovelace/geocompr](https://github.com/Robinlovelace/geocompr)
- Social media: [#geocompr](https://twitter.com/hashtag/geocompr)
&lt;!-- - Good old fashioned email: r.lovelace at leeds dot ac dot uk --&gt;



Grolemund, Garrett and Hadley Wickham (2016). _R for Data
Science_. O'Reilly Media. ISBN: 978-1-4919-1039-9.

Lovelace, Robin, Jakub Nowosad, and Jannes Meunchow (2019).
_Geocomputation with R_. CRC Press. ISBN: 1-138-30451-4.

Sherman, Gary (2008). _Desktop GIS: Mapping the Planet with Open
Source Tools_. Pragmatic Bookshelf.

Wickham, Hadley (2014). _Advanced R_. CRC Press.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
